######### é”šç‚¹ start #######
# ç­–ç•¥ç»„ç›¸å…³
pr: &pr {type: select, proxies: [èŠ‚ç‚¹é€‰æ‹©, é¦™æ¸¯æ•…è½¬, æ—¥æœ¬æ•…è½¬, é¦™æ¸¯è‡ªåŠ¨, æ—¥æœ¬è‡ªåŠ¨, ç¾å›½è‡ªåŠ¨, éŸ©å›½è‡ªåŠ¨, å…¶ä»–åœ°åŒºè‡ªåŠ¨, è‡ªåŠ¨é€‰æ‹©, åŠ å¡èŠ‚ç‚¹, é¦™æ¸¯èŠ‚ç‚¹, éŸ©å›½èŠ‚ç‚¹, æ—¥æœ¬èŠ‚ç‚¹, ç¾å›½èŠ‚ç‚¹, è´Ÿè½½å‡è¡¡, å…¨éƒ¨èŠ‚ç‚¹, ç›´è¿]}
#è¿™é‡Œæ˜¯è®¢é˜…æ›´æ–°å’Œå»¶è¿Ÿæµ‹è¯•ç›¸å…³çš„
p: &p {type: http, interval: 3600, health-check: {enable: true, url: "https://www.gstatic.com/generate_204", interval: 300}}
######### é”šç‚¹ end #######

# url é‡Œå¡«å†™è‡ªå·±çš„è®¢é˜…,åç§°ä¸èƒ½é‡å¤
proxy-providers:
  provider1:
    !!merge <<: *p
    url: "è®¢é˜…é“¾æ¥1"
  provider2:
    !!merge <<: *p
    url: "è®¢é˜…é“¾æ¥2"
ipv6: true
allow-lan: true
mixed-port: 7890
external-controller: 127.0.0.1:9090
profile:
  store-selected: true
  store-fake-ip: true
dns:
  enable: true
  ipv6: true
  enhanced-mode: fake-ip
  fake-ip-range: 192.168.1.10
  fake-ip-filter-mode: blacklist
  fake-ip-filter:
    - "*"
    - "+.lan"
    - "+.local"
    - "rule-set:cn_domain"
    - "rule-set:private_domain"
    - "+.apple.com"
    - "+.icloud.com"
  default-nameserver:
    - 223.5.5.5
  nameserver:
    - https://doh.pub/dns-query
    - https://dns.alidns.com/dns-query
  nameserver-policy:
    "rule-set:private_domain,cn_domain": https://doh.pub/dns-query
    "rule-set:geolocation-!cn": https://dns.google/dns-query
script:
  shortcuts:
    quic: network == 'udp' and dst_port == 443
proxies:
- name: "ç›´è¿"
  type: direct
  udp: true
proxy-groups:
  - {name: èŠ‚ç‚¹é€‰æ‹©, type: select, proxies: [é¦™æ¸¯æ•…è½¬, æ—¥æœ¬æ•…è½¬, é¦™æ¸¯è‡ªåŠ¨, æ—¥æœ¬è‡ªåŠ¨, ç¾å›½è‡ªåŠ¨, éŸ©å›½è‡ªåŠ¨, å…¶ä»–åœ°åŒºè‡ªåŠ¨, è‡ªåŠ¨é€‰æ‹©, åŠ å¡èŠ‚ç‚¹, éŸ©å›½èŠ‚ç‚¹, é¦™æ¸¯èŠ‚ç‚¹, æ—¥æœ¬èŠ‚ç‚¹, ç¾å›½èŠ‚ç‚¹, è´Ÿè½½å‡è¡¡, å…¨éƒ¨èŠ‚ç‚¹, ç›´è¿], icon: "https://raw.githubusercontent.com/Vbaethon/HOMOMIX/refs/heads/main/Icon/Color/Large/Server.png"}
  - {name: YouTube, !!merge <<: *pr, icon: "https://raw.githubusercontent.com/Vbaethon/HOMOMIX/refs/heads/main/Icon/Color/Large/YouTube.png"}
  - {name: Google, !!merge <<: *pr, icon: "https://raw.githubusercontent.com/Vbaethon/HOMOMIX/refs/heads/main/Icon/Color/Large/Google.png"}
  - {name: Ai, !!merge <<: *pr, icon: "https://raw.githubusercontent.com/Vbaethon/HOMOMIX/refs/heads/main/Icon/Color/Large/AI.png"}
  - {name: Claude, type: select, proxies: [ç¾å›½èŠ‚ç‚¹, å…¨éƒ¨èŠ‚ç‚¹], icon: "https://raw.githubusercontent.com/qljsyph/HOMOMIX/refs/heads/main/Icon/Color/Large/Claud.png"}
  - {name: Twitter, !!merge <<: *pr, icon: "https://raw.githubusercontent.com/qljsyph/HOMOMIX/refs/heads/main/Icon/Color/Large/Twitter.png"}
  - {name: GitHub, !!merge <<: *pr, icon: "https://raw.githubusercontent.com/Vbaethon/HOMOMIX/refs/heads/main/Icon/Color/Large/GitHub.png"}
  - {name: OneDrive, !!merge <<: *pr, icon: "https://raw.githubusercontent.com/Vbaethon/HOMOMIX/refs/heads/main/Icon/Color/Large/OneDrive.png"}
  - {name: Microsoft, !!merge <<: *pr, icon: "https://raw.githubusercontent.com/Vbaethon/HOMOMIX/refs/heads/main/Icon/Color/Large/Microsoft.png"}
  - {name: TikTok, !!merge <<: *pr, icon: "https://raw.githubusercontent.com/Vbaethon/HOMOMIX/refs/heads/main/Icon/Color/Large/TikTok.png"}
  - {name: Telegram, !!merge <<: *pr, icon: "https://raw.githubusercontent.com/Vbaethon/HOMOMIX/refs/heads/main/Icon/Color/Large/Telegram.png"}
  - {name: NETFLIX, !!merge <<: *pr, icon: "https://raw.githubusercontent.com/Vbaethon/HOMOMIX/refs/heads/main/Icon/Color/Large/Netflix.png"}
  - {name: Spotify, !!merge <<: *pr, icon: "https://raw.githubusercontent.com/qljsyph/HOMOMIX/refs/heads/main/Icon/Color/Large/Spotify.png"}
  - {name: Speedtest, !!merge <<: *pr, icon: "https://raw.githubusercontent.com/Vbaethon/HOMOMIX/refs/heads/main/Icon/Color/Large/SpeedTest.png"}
  - {name: PayPal, !!merge <<: *pr, icon: "https://raw.githubusercontent.com/Vbaethon/HOMOMIX/refs/heads/main/Icon/Color/Large/PayPal_business.png"}
  - {name: Apple, type: select, proxies: [ç›´è¿, èŠ‚ç‚¹é€‰æ‹©, ç¾å›½è‡ªåŠ¨, é¦™æ¸¯è‡ªåŠ¨], icon: "https://raw.githubusercontent.com/Vbaethon/HOMOMIX/refs/heads/main/Icon/Color/Large/Apple_black.png"}
  - {name: Honorking, type: select, proxies: [é¦™æ¸¯æ•…è½¬, æ—¥æœ¬æ•…è½¬, é¦™æ¸¯è‡ªåŠ¨, æ—¥æœ¬è‡ªåŠ¨, ç¾å›½è‡ªåŠ¨, éŸ©å›½è‡ªåŠ¨, è‡ªåŠ¨é€‰æ‹©, åŠ å¡èŠ‚ç‚¹, éŸ©å›½èŠ‚ç‚¹, é¦™æ¸¯èŠ‚ç‚¹, æ—¥æœ¬èŠ‚ç‚¹, ç¾å›½èŠ‚ç‚¹, å…¨éƒ¨èŠ‚ç‚¹], icon: "https://raw.githubusercontent.com/qljsyph/ruleset-icon/refs/heads/main/Icon/Large/honorkings.png"}
  - {name: Playstation, type: select, proxies: [ç›´è¿, é¦™æ¸¯æ•…è½¬], icon: "https://raw.githubusercontent.com/qljsyph/HOMOMIX/refs/heads/main/Icon/Color/Large/Playstation.png"}
  - {name: è‹±å›½èŠ‚ç‚¹, type: select, include-all: true, filter: "(?i)è‹±å›½|ğŸ‡¬ğŸ‡§|uk|UK", icon: "https://raw.githubusercontent.com/qljsyph/HOMOMIX/refs/heads/main/Icon/Color/Large/UK.png"}
  - {name: å…¨çƒç›´è¿, type: select, proxies: [ç›´è¿, èŠ‚ç‚¹é€‰æ‹©], icon: "https://raw.githubusercontent.com/Vbaethon/HOMOMIX/refs/heads/main/Icon/Color/Large/China.png"}
  - {name: æ¼ç½‘ä¹‹é±¼, type: select, proxies: [è‡ªåŠ¨é€‰æ‹©, èŠ‚ç‚¹é€‰æ‹©, è´Ÿè½½å‡è¡¡, ç›´è¿, å…¶ä»–åœ°åŒºè‡ªåŠ¨], icon: "https://raw.githubusercontent.com/Vbaethon/HOMOMIX/refs/heads/main/Icon/Color/Large/Omission.png"}
  - {name: é¦™æ¸¯èŠ‚ç‚¹, type: select, include-all: true, filter: "(?i)æ¸¯|hk|hongkong|hong kong", icon: "https://raw.githubusercontent.com/Vbaethon/HOMOMIX/refs/heads/main/Icon/Color/Large/Hong_Kong.png"}
  - {name: åŠ å¡èŠ‚ç‚¹, type: select, include-all: true, filter: "(?i)æ–°åŠ å¡|ç‹®åŸ|å¡|SG", icon: "https://raw.githubusercontent.com/Vbaethon/HOMOMIX/refs/heads/main/Icon/Color/Large/Singapore.png"}
  - {name: éŸ©å›½èŠ‚ç‚¹, type: select, include-all: true, filter: "(?i)éŸ©|éŸ©å›½|KR|kora", icon: "https://raw.githubusercontent.com/Vbaethon/HOMOMIX/refs/heads/main/Icon/Color/Large/South_Korea.png"}
  - {name: æ—¥æœ¬èŠ‚ç‚¹, type: select, include-all: true, filter: "(?i)æ—¥|jp|japan", icon: "https://raw.githubusercontent.com/Vbaethon/HOMOMIX/refs/heads/main/Icon/Color/Large/Japan.png"}
  - {name: ç¾å›½èŠ‚ç‚¹, type: select, include-all: true, filter: "(?i)ç¾|us|unitedstates|united states", icon: "https://raw.githubusercontent.com/Vbaethon/HOMOMIX/refs/heads/main/Icon/Color/Large/USA.png"}
  - {name: é¦™æ¸¯æ•…è½¬, type: fallback, include-all: true, tolerance: 20, interval: 300, filter: "(?=.*(æ¸¯|HK|(?i)Hong))^((?!(å°|æ—¥|éŸ©|æ–°|æ·±|ç¾)).)*$", icon: "https://raw.githubusercontent.com/Vbaethon/HOMOMIX/refs/heads/main/Icon/Color/Large/Failover.png"}
  - {name: æ—¥æœ¬æ•…è½¬, type: fallback, include-all: true, tolerance: 20, interval: 300, filter: "(?=.*(æ—¥æœ¬|JP|(?i)Japan))^((?!(æ¸¯|å°|éŸ©|æ–°|ç¾)).)*$", icon: "https://raw.githubusercontent.com/Vbaethon/HOMOMIX/refs/heads/main/Icon/Color/Large/Failover.png"}
  - {name: é¦™æ¸¯è‡ªåŠ¨, type: url-test, include-all: true, tolerance: 20, interval: 300, filter: "(?=.*(æ¸¯|HK|(?i)Hong))^((?!(å°|æ—¥|éŸ©|æ–°|æ·±|ç¾)).)*$", icon: "https://raw.githubusercontent.com/Vbaethon/HOMOMIX/refs/heads/main/Icon/Color/Large/Auto_Link.png"}
  - {name: æ—¥æœ¬è‡ªåŠ¨, type: url-test, include-all: true, tolerance: 20, interval: 300, filter: "(?=.*(æ—¥æœ¬|JP|(?i)Japan))^((?!(æ¸¯|å°|éŸ©|æ–°|ç¾)).)*$", icon: "https://raw.githubusercontent.com/Vbaethon/HOMOMIX/refs/heads/main/Icon/Color/Large/Auto_Link.png"}
  - {name: ç¾å›½è‡ªåŠ¨, type: url-test, include-all: true, tolerance: 20, interval: 300, filter: "(?=.*(ç¾|US|(?i)States|America))^((?!(æ¸¯|å°|æ—¥|éŸ©|æ–°)).)*$", icon: "https://raw.githubusercontent.com/Vbaethon/HOMOMIX/refs/heads/main/Icon/Color/Large/Auto_Link.png"}  - {name: éŸ©å›½è‡ªåŠ¨, type: url-test, include-all: true, tolerance: 20, interval: 300, filter: "(?=.*(éŸ©|KR|(?i)States|Kora))^((?!(ç¾|æ¸¯|å°|æ—¥|æ–°|3|x3)).)*$", icon: "https://raw.githubusercontent.com/Vbaethon/HOMOMIX/refs/heads/main/Icon/Color/Large/Auto_Link.png"}
  - {name: å…¶ä»–åœ°åŒºè‡ªåŠ¨, type: url-test, include-all: true, tolerance: 20, interval: 300, filter: "^((?!(æ¸¯|ç¾|æ—¥|éŸ©|æ–°|US|HK|JP|KR|SG|America|States|Japan|Korea|Singapore|Hong|ç›´è¿)).)*$", icon: "https://raw.githubusercontent.com/Vbaethon/HOMOMIX/refs/heads/main/Icon/Color/Large/Auto_Link.png"}
  - {name: è‡ªåŠ¨é€‰æ‹©, type: url-test, include-all: true, tolerance: 20, interval: 300, filter: "^((?!(ç›´è¿)).)*$", icon: "https://raw.githubusercontent.com/Vbaethon/HOMOMIX/refs/heads/main/Icon/Color/Large/Auto_Link.png"}
  - {name: è´Ÿè½½å‡è¡¡, type: load-balance, include-all: true, tolerance: 150, interval: 300, filter: "(?=.*(0.1|0.5|(?i)States|Kora|éŸ©å›½|ä¿„ç½—æ–¯|æ–°åŠ å¡|è¶Šå—))^((?!(ğŸ‡¸ğŸ‡¬|2x|x2|x3)).)*$", icon: "https://raw.githubusercontent.com/qljsyph/HOMOMIX/refs/heads/main/Icon/Color/Large/Load_balancing_2.png"}
  - {name: å…¨éƒ¨èŠ‚ç‚¹, type: select, include-all: true}

rules:
  - SCRIPT,quic,REJECT-DROP  
  - RULE-SET,private_domain,ç›´è¿
  - RULE-SET,direct1,ç›´è¿
  - RULE-SET,giffgaff_domain,Giffgaff
  - RULE-SET,claude,Claude
  - RULE-SET,playstation,Playstation
  - RULE-SET,honorking,Honorking
  - RULE-SET,apple_domain,Apple
  - RULE-SET,applecn,Apple
  - RULE-SET,proxylite,èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,ai,Ai
  - RULE-SET,twitter_domain,Twitter
  - RULE-SET,github_domain,GitHub
  - RULE-SET,youtube_domain,YouTube
  - RULE-SET,google_domain,Google
  - RULE-SET,onedrive_domain,OneDrive
  - RULE-SET,microsoft_domain,Microsoft
  - RULE-SET,tiktok_domain,TikTok
  - RULE-SET,speedtest_domain,Speedtest
  - RULE-SET,telegram_domain,Telegram
  - RULE-SET,netflix_domain,NETFLIX
  - RULE-SET,spotify,Spotify
  - RULE-SET,paypal_domain,PayPal
  - RULE-SET,gfw_domain,èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,geolocation-!cn,èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,cn_domain,å…¨çƒç›´è¿
  - RULE-SET,giffgaff_ip,Giffgaff
  - RULE-SET,google_ip,Google,no-resolve
  - RULE-SET,twitter_ip,Twitter,no-resolve
  - RULE-SET,netflix_ip,NETFLIX,no-resolve
  - RULE-SET,telegram_ip,Telegram,no-resolve
  - RULE-SET,honorking_ip,Honorking,no-resolve
  - RULE-SET,spotify_ip,Spotify,no-resolve
  - RULE-SET,private_ip,ç›´è¿,no-resolve #è§„åˆ™é›†IPè§„åˆ™ç›¸å…³è” private_ip
  - RULE-SET,cn_ip,å…¨çƒç›´è¿
  - MATCH,æ¼ç½‘ä¹‹é±¼

rule-anchor:
  ip: &ip {type: http, interval: 86400, behavior: ipcidr, format: yaml}
  domain: &domain {type: http, interval: 86400, behavior: domain, format: yaml}
  class: &class {type: http, interval: 86400, behavior: classical, format: text}
rule-providers: 
  private_domain: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/private.yaml"}
  direct1: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/qljsyph/ruleset-icon/refs/heads/main/mihomo/domain/Direct-enhance.yaml"}
  applecn: {!!merge <<: *class, url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/refs/heads/master/Clash/Apple.list"}
  playstation: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/refs/heads/meta/geo/geosite/playstation.yaml"}
  honorking: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/qljsyph/ruleset-icon/refs/heads/main/mihomo/domain/honorking.yaml"}
  proxylite: {!!merge <<: *class, url: "https://raw.githubusercontent.com/qljsyph/rule/refs/heads/MTP-rules/ProxyLiteqcyhub.list"}
  claude: {!!merge <<: *class, url: "https://raw.githubusercontent.com/qljsyph/ios_rule_script/refs/heads/master/rule/Clash/Claude/Claude.list"}
  ai: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/qljsyph/ruleset-icon/refs/heads/main/mihomo/domain/AI.yaml"}
  youtube_domain: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/youtube.yaml"}
  google_domain: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/google.yaml"}
  github_domain: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/github.yaml"}
  telegram_domain: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/telegram.yaml"}
  twitter_domain: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/refs/heads/meta/geo/geosite/twitter.yaml"}
  netflix_domain: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/netflix.yaml"}
  spotify: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/refs/heads/meta/geo/geosite/spotify.yaml"}
  paypal_domain: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/paypal.yaml"}
  onedrive_domain: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/onedrive.yaml"}
  microsoft_domain: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/microsoft.yaml"}
  apple_domain: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/apple-cn.yaml"}
  speedtest_domain: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/ookla-speedtest.yaml"}
  tiktok_domain: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/tiktok.yaml"}
  giffgaff_domain: { <<: *domain, url: "https://raw.githubusercontent.com/qljsyph/ruleset-icon/refs/heads/main/mihomo/domain/giffgaff.mrs" }
  gfw_domain: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/gfw.yaml"}
  geolocation-!cn: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/geolocation-!cn.yaml"}
  cn_domain: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/cn.yaml"}
  
  cn_ip: {!!merge <<: *ip, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/cn.yaml"}
  private_ip: {!!merge <<: *ip, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/refs/heads/meta/geo/geoip/private.yaml"} #ç§æœ‰IP rule set no resolve
  google_ip: {!!merge <<: *ip, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/google.yaml"}
  telegram_ip: {!!merge <<: *ip, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/telegram.yaml"}
  twitter_ip: {!!merge <<: *ip, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/refs/heads/meta/geo/geoip/twitter.yaml"}
  netflix_ip: {!!merge <<: *ip, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/netflix.yaml"}
  honorking_ip: {!!merge <<: *ip, url: "https://raw.githubusercontent.com/qljsyph/ruleset-icon/refs/heads/main/mihomo/ipcidr/honorking-ip.yaml"}
  spotify_ip: {!!merge <<: *ip, url: "https://raw.githubusercontent.com/qljsyph/ruleset-icon/refs/heads/main/mihomo/ipcidr/spotify-ip.yaml"}
  giffgaff_ip: { <<: *ip, url: "https://raw.githubusercontent.com/qljsyph/ruleset-icon/refs/heads/main/mihomo/ipcidr/giffgaff-ip.mrs" }
